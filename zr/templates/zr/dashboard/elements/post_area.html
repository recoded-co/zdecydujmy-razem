{% load i18n %}
{% load url from future %}

<div class="media-body"  style="margin-left: 20px;">
    <em>{[{ post.author_name }]}({[{ post.date | date:'yyyy-MM-dd' }]}) napisał:</em>

    <p ng-click="comment(post)">{[{ post.content }]}</p>
    <ul ng-repeat="item in post.filep">
        <li>{[{ item.name }]}<a href="{% url 'fm' %}/{[{ item.id }]}" >{% trans 'Załaduj' %}</a></li>
    </ul>

    <button type="button" class="btn btn-xs"  ng-hide="post.nodes.length==0" ng-click="showOneDown(post)">
    {% trans 'Rozwiń' %}
    </button>
<!--<input class="btn btn-xs" type="file" value="{[{ post.id }]}" multiple ng-model="files" file-change>
    <br><br>
    Selected: {[{ files.length }]}
-->
    <form name="fupload" action="{% url 'fm' %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="post_id" value="{[{ post.id }]}">
            <p><input class="btn btn-xs" name="datafile" type="file" value="Upload" onchange="this.form.submit();"/></p>
    </form>

    <button type="button" class="btn btn-xs"  ng-hide="'{{ user }}'=='AnonymousUser'"
         ng-click="scoreUp(post)">
         <span  class="glyphicon glyphicon-thumbs-up"></span>
    </button>

    <button type="button" class="btn btn-xs"    ng-hide="'{{ user }}'=='AnonymousUser'"
              ng-click="scoreDown(post)">
        <span class="glyphicon glyphicon-thumbs-down"></span>
    </button>

    {% trans 'ocena' %}: {[{ post.score || 0 }]}  {% trans 'komentarzy' %}: {[{ post.numcom || 0 }]}

    <textarea     ng-hide="!(post.zmiennac!=undefined && post.zmiennac==true)"
                  ng-model="post.text"
                  class="form-control"
                  rows="3">
    </textarea>

    <input type="hidden" ng-model="post.plan" value="">

    <button    type="button" class="btn btn-xs" ng-hide="!(post.zmiennac!=undefined && post.zmiennac==true)"
                  ng-click="addDown(post)">
         {% trans 'Komentarz do wypowiedzi' %}
    </button>
    <button    type="button" class="btn btn-xs" ng-hide="!(post.zmiennac!=undefined && post.zmiennac==true)"
                  ng-click="delete(post)">
         {% trans 'Kasuj' %}
    </button>

    <div  ng-hide="!(post.rozwin!=undefined && post.rozwin==true )&& showallposts" >
        <div class="media"
             ng-repeat="post in post.nodes "
             ng-include="'tree_item_renderer.html'">
        </div>
    </div>
</div>